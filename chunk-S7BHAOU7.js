import{a as G,b as H,c as J,d as K,e as Q}from"./chunk-XNIJXEFC.js";import{$ as F,$a as P,A as O,Aa as U,E as q,O as f,Oa as h,Pa as y,Qa as R,Ra as S,Sa as T,Ta as i,Ua as s,V as g,Wa as D,Xa as b,Za as u,_a as w,a as v,ab as L,b as x,ba as C,bb as N,cb as V,fa as _,gb as M,hb as A,ib as B,jb as W,k as E,kb as $,nb as z,r as j,sa as c}from"./chunk-ES2YJ4JP.js";function X(e,t){let n=t?.injector??g(F),o=new E(1),a=B(()=>{let r;try{r=e()}catch(d){M(()=>o.error(d));return}M(()=>o.next(r))},{injector:n,manualCleanup:!0});return n.get(C).onDestroy(()=>{a.destroy(),o.complete()}),o.asObservable()}function Y(e,t){let o=!t?.manualCleanup?t?.injector?.get(C)??g(C):null,a=ee(t?.equal),r;t?.requireSync?r=_({kind:0},{equal:a}):r=_({kind:1,value:t?.initialValue},{equal:a});let d,m=e.subscribe({next:l=>r.set({kind:1,value:l}),error:l=>{r.set({kind:2,error:l}),d?.()},complete:()=>{d?.()}});if(t?.requireSync&&r().kind===0)throw new f(601,!1);return d=o?.onDestroy(m.unsubscribe.bind(m)),A(()=>{let l=r();switch(l.kind){case 1:return l.value;case 2:throw l.error;case 0:throw new f(601,!1)}},{equal:t?.equal})}function ee(e=Object.is){return(t,n)=>t.kind===1&&n.kind===1&&e(t.value,n.value)}function k(e){return W(x(v({},e),{loader:void 0,stream:t=>{let n,o=()=>n?.unsubscribe();t.abortSignal.addEventListener("abort",o);let a=_({value:void 0}),r,d=new Promise(p=>r=p);function m(p){a.set(p),r?.(a),r=void 0}let l=e.stream??e.loader;if(l===void 0)throw new f(990,!1);return n=l(t).subscribe({next:p=>m({value:p}),error:p=>{m({error:$(p)}),t.abortSignal.removeEventListener("abort",o)},complete:()=>{r&&m({error:new f(991,!1)}),t.abortSignal.removeEventListener("abort",o)}}),d}}))}function Z(e){return Y(X(e).pipe(O(500),q()),{initialValue:e()})}function te(e,t){e&1&&(i(0,"p"),u(1,"Loading posts..."),s())}function ne(e,t){if(e&1&&(i(0,"p"),u(1),s()),e&2){let n,o=b();c(),P("Error loading posts: ",(n=o.posts.error())==null?null:n.message)}}function oe(e,t){if(e&1&&(i(0,"li"),u(1),s()),e&2){let n=t.$implicit;c(),w(n.title)}}function re(e,t){if(e&1&&(i(0,"ul"),S(1,oe,2,1,"li",null,R),s()),e&2){let n=b();c(),T(n.posts.value())}}function ie(e,t){e&1&&(i(0,"p"),u(1,"Loading posts..."),s())}function se(e,t){if(e&1&&(i(0,"p"),u(1),s()),e&2){let n,o=b();c(),P("Error loading posts: ",(n=o.alteredPosts.error())==null?null:n.message)}}function ae(e,t){if(e&1&&(i(0,"li"),u(1),s()),e&2){let n=t.$implicit;c(),w(n.title)}}function le(e,t){if(e&1&&(i(0,"ul"),S(1,ae,2,1,"li",null,R),s()),e&2){let n=b();c(),T(n.alteredPosts.value())}}var I=class e{postsService=g(G);searchTerm=z("");debouncedSearchTerm=Z(this.searchTerm);posts=k({params:()=>this.debouncedSearchTerm(),stream:({params:t})=>this.postsService.getFilteredPostsObservable(t),defaultValue:[]});alteredPosts=k({params:()=>this.debouncedSearchTerm(),stream:({params:t})=>this.postsService.getFilteredPostsObservable(t).pipe(j(n=>n.map(o=>x(v({},o),{title:o.title.toUpperCase()})))),defaultValue:[]});reload(){this.posts.reload(),this.alteredPosts.reload()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=U({type:e,selectors:[["app-posts-rx-resource"]],inputs:{searchTerm:[1,"searchTerm"]},outputs:{searchTerm:"searchTermChange"},decls:13,vars:3,consts:[[3,"ngModelChange","ngModel"],[3,"click"]],template:function(n,o){n&1&&(i(0,"h2"),u(1,"Posts with rxResource"),s(),i(2,"input",0),V("ngModelChange",function(r){return N(o.searchTerm,r)||(o.searchTerm=r),r}),s(),i(3,"button",1),D("click",function(){return o.searchTerm.set("")}),u(4,"Clear filter"),s(),i(5,"button",1),D("click",function(){return o.reload()}),u(6,"Reload posts"),s(),h(7,te,2,0,"p")(8,ne,2,1,"p")(9,re,3,0,"ul"),h(10,ie,2,0,"p")(11,se,2,1,"p")(12,le,3,0,"ul")),n&2&&(c(2),L("ngModel",o.searchTerm),c(5),y(o.posts.isLoading()?7:o.posts.error()?8:9),c(3),y(o.alteredPosts.isLoading()?10:o.alteredPosts.error()?11:12))},dependencies:[Q,H,J,K],encapsulation:2})};export{I as default};
